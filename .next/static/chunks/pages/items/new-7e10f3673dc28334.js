(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{4802:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/items/new",function(){return r(3276)}])},8402:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var i=r(7294),o=r(1163),s=r.n(o),l=r(6976);let a=e=>fetch(e).then(e=>e.json());function n(){let{redirectTo:e="",redirectIfFound:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:r,error:o}=(0,l.ZP)("/api/auth/me",a),n=null==r?void 0:r.user,c=!!r,d=!!n;return(0,i.useEffect)(()=>{e&&c&&(e&&!t&&!d||t&&d)&&s().push(e)},[e,t,c,d]),{user:n,isLoading:!c,error:o}}},3276:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var i=r(5893),o=r(7294),s=r(1163),l=r.n(s),a=r(8402);function n(){let{user:e,isLoading:t}=(0,a.Z)({redirectTo:"/login"}),[r,s]=(0,o.useState)(""),[n,c]=(0,o.useState)(!1);async function d(e){e.preventDefault(),c(!0),s("");let t=e.currentTarget,r={title:t.title.value,description:t.description.value,category:t.category.value,condition:t.condition.value,type:t.type.value};try{let e=await fetch("/api/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(201===e.status)l().push("/");else{let{message:t}=await e.json();s(t)}}catch(e){s("Ocorreu um erro ao publicar o item.")}finally{c(!1)}}return t||!e?(0,i.jsx)("p",{className:"p-4",children:"Carregando..."}):(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("header",{className:"flex items-center mb-6",children:(0,i.jsx)("h1",{className:"text-2xl font-bold text-primary",children:"Anunciar Novo Item"})}),(0,i.jsxs)("form",{onSubmit:d,className:"space-y-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-dark mb-1",children:"T\xedtulo do Item"}),(0,i.jsx)("input",{type:"text",id:"title",name:"title",className:"w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-dark mb-1",children:"Descri\xe7\xe3o"}),(0,i.jsx)("textarea",{id:"description",name:"description",rows:"4",className:"w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-dark mb-1",children:"Categoria"}),(0,i.jsxs)("select",{id:"category",name:"category",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",required:!0,children:[(0,i.jsx)("option",{value:"M\xf3veis",children:"M\xf3veis"}),(0,i.jsx)("option",{value:"Roupas",children:"Roupas"}),(0,i.jsx)("option",{value:"Livros",children:"Livros"}),(0,i.jsx)("option",{value:"Eletr\xf4nicos",children:"Eletr\xf4nicos"}),(0,i.jsx)("option",{value:"Outros",children:"Outros"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"condition",className:"block text-sm font-medium text-dark mb-1",children:"Condi\xe7\xe3o"}),(0,i.jsxs)("select",{id:"condition",name:"condition",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",required:!0,children:[(0,i.jsx)("option",{value:"Bom estado",children:"Bom estado"}),(0,i.jsx)("option",{value:"Marcas de uso",children:"Com marcas de uso"}),(0,i.jsx)("option",{value:"Para pe\xe7as/reciclagem",children:"Para pe\xe7as / reciclagem"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-dark mb-1",children:"Tipo de An\xfancio"}),(0,i.jsxs)("select",{id:"type",name:"type",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",required:!0,children:[(0,i.jsx)("option",{value:"Doa\xe7\xe3o",children:"Doa\xe7\xe3o"}),(0,i.jsx)("option",{value:"Troca",children:"Troca"}),(0,i.jsx)("option",{value:"Reciclagem",children:"Reciclagem"})]})]}),(0,i.jsx)("button",{type:"submit",disabled:n,className:"w-full bg-primary hover:bg-primary-dark text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:bg-gray-400",children:n?"Publicando...":"Publicar Item"}),r&&(0,i.jsx)("p",{className:"text-red-500 text-center",children:r})]})]})}}},function(e){e.O(0,[976,888,774,179],function(){return e(e.s=4802)}),_N_E=e.O()}]);