(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{4194:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/items",function(){return s(2794)}])},2794:function(t,e,s){"use strict";let n;s.r(e),s.d(e,{default:function(){return i}}),n=new(s(385)).PrismaClient;var o=s(3085);let a={password:s(3454).env.SECRET_COOKIE_PASSWORD,cookieName:"reusa-session",cookieOptions:{secure:!0}};async function r(t,e){return await (0,o.iW)(t,e,a)}async function i(t,e){if("GET"===t.method){let t=await n.item.findMany({orderBy:{createdAt:"desc"},include:{author:{select:{name:!0}}}});return e.status(200).json(t)}if("POST"===t.method){let s=(await r(t,e)).user;if(!s)return e.status(401).json({message:"N\xe3o autorizado."});let{title:o,description:a,category:i,condition:u,type:c}=t.body;if(!o||!a||!i||!u||!c)return e.status(400).json({message:"Todos os campos s\xe3o obrigat\xf3rios."});try{let t=await n.item.create({data:{title:o,description:a,category:i,condition:u,type:c,authorId:s.id}});return e.status(201).json(t)}catch(t){return e.status(500).json({message:"Erro ao criar o item."})}}e.setHeader("Allow",["GET","POST"]),e.status(405).end("Method ".concat(t.method," Not Allowed"))}}},function(t){t.O(0,[875,888,774,179],function(){return t(t.s=4194)}),_N_E=t.O()}]);