(()=>{var e={};e.id=689,e.ids=[689,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},3269:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>p,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>f,reportWebVitals:()=>g,routeModule:()=>w,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>P});var a=s(7093),i=s(5244),n=s(1323),o=s(2899),l=s.n(o),c=s(5620),u=s(398),d=e([u]);u=(d.then?(await d)():d)[0];let m=(0,n.l)(u,"default"),f=(0,n.l)(u,"getStaticProps"),x=(0,n.l)(u,"getStaticPaths"),h=(0,n.l)(u,"getServerSideProps"),p=(0,n.l)(u,"config"),g=(0,n.l)(u,"reportWebVitals"),P=(0,n.l)(u,"unstable_getStaticProps"),b=(0,n.l)(u,"unstable_getStaticPaths"),j=(0,n.l)(u,"unstable_getStaticParams"),S=(0,n.l)(u,"unstable_getServerProps"),v=(0,n.l)(u,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/items",pathname:"/items",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:u});r()}catch(e){r(e)}})},4439:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=new(require("@prisma/client")).PrismaClient},2608:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{G:()=>n});var a=s(4014),i=e([a]);a=(i.then?(await i)():i)[0];let o={password:process.env.SECRET_COOKIE_PASSWORD,cookieName:"reusa-session",cookieOptions:{secure:!0}};async function n(e,t){return await (0,a.getIronSession)(e,t,o)}r()}catch(e){r(e)}})},5620:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(997);s(6764);var a=s(1664),i=s.n(a),n=s(1163);let o=({href:e,iconClass:t,label:s})=>{let a=(0,n.useRouter)().pathname===e;return(0,r.jsxs)(i(),{href:e,className:`flex flex-col items-center hover:text-primary transition-colors p-2 rounded-lg ${a?"text-primary":"text-medium"}`,children:[r.jsx("i",{className:`fas ${t} text-xl`}),r.jsx("span",{className:"text-xs mt-1",children:s})]})};function l(){return(0,r.jsxs)("nav",{className:"fixed-bottom-nav w-full max-w-sm mx-auto bg-white border-t border-gray-200 p-2 flex justify-around items-center",children:[r.jsx(o,{href:"/",iconClass:"fa-home",label:"In\xedcio"}),r.jsx(o,{href:"/search",iconClass:"fa-search",label:"Buscar"}),r.jsx(i(),{href:"/items/new",className:"flex flex-col items-center text-white bg-primary hover:bg-primary-dark transition-colors p-3 rounded-full shadow-lg -mt-6 transform scale-110",children:r.jsx("i",{className:"fas fa-plus text-2xl"})}),r.jsx(o,{href:"/messages",iconClass:"fa-comments",label:"Mensagens"}),r.jsx(o,{href:"/profile",iconClass:"fa-user",label:"Perfil"})]})}function c({children:e}){return(0,r.jsxs)("div",{className:"max-w-sm mx-auto h-screen flex flex-col border border-gray-300 shadow-lg overflow-hidden bg-light",children:[r.jsx("main",{className:"flex-grow overflow-y-auto pb-20",children:e}),r.jsx(l,{})]})}let u=require("next/head");var d=s.n(u);let m=function({Component:e,pageProps:t}){return(e.getLayout||(e=>r.jsx(c,{children:e})))((0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d(),{children:[r.jsx("title",{children:"ReUsa App"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),r.jsx(e,{...t})]}))}},398:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>o});var a=s(4439),i=s(2608),n=e([i]);async function o(e,t){if("GET"===e.method){let e=await a.Z.item.findMany({orderBy:{createdAt:"desc"},include:{author:{select:{name:!0}}}});return t.status(200).json(e)}if("POST"===e.method){let s=(await (0,i.G)(e,t)).user;if(!s)return t.status(401).json({message:"N\xe3o autorizado."});let{title:r,description:n,category:o,condition:l,type:c}=e.body;if(!r||!n||!o||!l||!c)return t.status(400).json({message:"Todos os campos s\xe3o obrigat\xf3rios."});try{let e=await a.Z.item.create({data:{title:r,description:n,category:o,condition:l,type:c,authorId:s.id}});return t.status(201).json(e)}catch(e){return t.status(500).json({message:"Erro ao criar o item."})}}t.setHeader("Allow",["GET","POST"]),t.status(405).end(`Method ${e.method} Not Allowed`)}i=(n.then?(await n)():n)[0],r()}catch(e){r(e)}})},6764:()=>{},5244:(e,t)=>{"use strict";var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4014:e=>{"use strict";e.exports=import("iron-session")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[567,424,899],()=>s(3269));module.exports=r})();