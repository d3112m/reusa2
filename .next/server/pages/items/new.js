(()=>{var e={};e.id=353,e.ids=[353,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},7635:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>f,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>x,reportWebVitals:()=>b,routeModule:()=>w,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>g});var a=r(7093),i=r(5244),l=r(1323),n=r(2899),o=r.n(n),c=r(5620),d=r(3276),u=e([d]);d=(u.then?(await u)():u)[0];let m=(0,l.l)(d,"default"),x=(0,l.l)(d,"getStaticProps"),p=(0,l.l)(d,"getStaticPaths"),h=(0,l.l)(d,"getServerSideProps"),f=(0,l.l)(d,"config"),b=(0,l.l)(d,"reportWebVitals"),g=(0,l.l)(d,"unstable_getStaticProps"),j=(0,l.l)(d,"unstable_getStaticPaths"),v=(0,l.l)(d,"unstable_getStaticParams"),y=(0,l.l)(d,"unstable_getServerProps"),P=(0,l.l)(d,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/items/new",pathname:"/items/new",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:d});s()}catch(e){s(e)}})},8402:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>l}),r(6689),r(1163);var a=r(5941),i=e([a]);a=(i.then?(await i)():i)[0];let n=e=>fetch(e).then(e=>e.json());function l({redirectTo:e="",redirectIfFound:t=!1}={}){let{data:r,error:s}=(0,a.default)("/api/auth/me",n);return{user:r?.user,isLoading:!r,error:s}}s()}catch(e){s(e)}})},5620:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(997);r(6764);var a=r(1664),i=r.n(a),l=r(1163);let n=({href:e,iconClass:t,label:r})=>{let a=(0,l.useRouter)().pathname===e;return(0,s.jsxs)(i(),{href:e,className:`flex flex-col items-center hover:text-primary transition-colors p-2 rounded-lg ${a?"text-primary":"text-medium"}`,children:[s.jsx("i",{className:`fas ${t} text-xl`}),s.jsx("span",{className:"text-xs mt-1",children:r})]})};function o(){return(0,s.jsxs)("nav",{className:"fixed-bottom-nav w-full max-w-sm mx-auto bg-white border-t border-gray-200 p-2 flex justify-around items-center",children:[s.jsx(n,{href:"/",iconClass:"fa-home",label:"In\xedcio"}),s.jsx(n,{href:"/search",iconClass:"fa-search",label:"Buscar"}),s.jsx(i(),{href:"/items/new",className:"flex flex-col items-center text-white bg-primary hover:bg-primary-dark transition-colors p-3 rounded-full shadow-lg -mt-6 transform scale-110",children:s.jsx("i",{className:"fas fa-plus text-2xl"})}),s.jsx(n,{href:"/messages",iconClass:"fa-comments",label:"Mensagens"}),s.jsx(n,{href:"/profile",iconClass:"fa-user",label:"Perfil"})]})}function c({children:e}){return(0,s.jsxs)("div",{className:"max-w-sm mx-auto h-screen flex flex-col border border-gray-300 shadow-lg overflow-hidden bg-light",children:[s.jsx("main",{className:"flex-grow overflow-y-auto pb-20",children:e}),s.jsx(o,{})]})}let d=require("next/head");var u=r.n(d);let m=function({Component:e,pageProps:t}){return(e.getLayout||(e=>s.jsx(c,{children:e})))((0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u(),{children:[s.jsx("title",{children:"ReUsa App"}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),s.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),s.jsx(e,{...t})]}))}},3276:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>d});var a=r(997),i=r(6689),l=r(1163),n=r.n(l),o=r(8402),c=e([o]);function d(){let{user:e,isLoading:t}=(0,o.Z)({redirectTo:"/login"}),[r,s]=(0,i.useState)(""),[l,c]=(0,i.useState)(!1);async function d(e){e.preventDefault(),c(!0),s("");let t=e.currentTarget,r={title:t.title.value,description:t.description.value,category:t.category.value,condition:t.condition.value,type:t.type.value};try{let e=await fetch("/api/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(201===e.status)n().push("/");else{let{message:t}=await e.json();s(t)}}catch(e){s("Ocorreu um erro ao publicar o item.")}finally{c(!1)}}return t||!e?a.jsx("p",{className:"p-4",children:"Carregando..."}):(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("header",{className:"flex items-center mb-6",children:a.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Anunciar Novo Item"})}),(0,a.jsxs)("form",{onSubmit:d,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-dark mb-1",children:"T\xedtulo do Item"}),a.jsx("input",{type:"text",id:"title",name:"title",className:"w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-dark mb-1",children:"Descri\xe7\xe3o"}),a.jsx("textarea",{id:"description",name:"description",rows:"4",className:"w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-dark mb-1",children:"Categoria"}),(0,a.jsxs)("select",{id:"category",name:"category",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",required:!0,children:[a.jsx("option",{value:"M\xf3veis",children:"M\xf3veis"}),a.jsx("option",{value:"Roupas",children:"Roupas"}),a.jsx("option",{value:"Livros",children:"Livros"}),a.jsx("option",{value:"Eletr\xf4nicos",children:"Eletr\xf4nicos"}),a.jsx("option",{value:"Outros",children:"Outros"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium text-dark mb-1",children:"Condi\xe7\xe3o"}),(0,a.jsxs)("select",{id:"condition",name:"condition",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",required:!0,children:[a.jsx("option",{value:"Bom estado",children:"Bom estado"}),a.jsx("option",{value:"Marcas de uso",children:"Com marcas de uso"}),a.jsx("option",{value:"Para pe\xe7as/reciclagem",children:"Para pe\xe7as / reciclagem"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-dark mb-1",children:"Tipo de An\xfancio"}),(0,a.jsxs)("select",{id:"type",name:"type",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",required:!0,children:[a.jsx("option",{value:"Doa\xe7\xe3o",children:"Doa\xe7\xe3o"}),a.jsx("option",{value:"Troca",children:"Troca"}),a.jsx("option",{value:"Reciclagem",children:"Reciclagem"})]})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary hover:bg-primary-dark text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:bg-gray-400",children:l?"Publicando...":"Publicar Item"}),r&&a.jsx("p",{className:"text-red-500 text-center",children:r})]})]})}o=(c.then?(await c)():c)[0],s()}catch(e){s(e)}})},6764:()=>{},5244:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5941:e=>{"use strict";e.exports=import("swr")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[567,424,899],()=>r(7635));module.exports=s})();